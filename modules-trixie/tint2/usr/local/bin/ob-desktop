#!/bin/bash

opt1=" Cairo-dock"
opt2=" Rox pinboard"
opt3=" Cairo-dock + Rox pinboard"
opt4=" Tint2 Panels"
opt5=" Pcmanfm + Lxpanel"
opt1a="Desktop with cairo-dock "
opt2a="Desktop provided by rox pinboard, tint2 bottom panel"
opt3a="Cairo-dock and Desktop provided by rox pinboard"
opt4a="Tint2 bottom and top panel"
opt5a="Desktop provided by pcmanfm, lxpanel bottom panel"


cd $HOME/.config/openbox

cairod() {
ln -sf cairod set-desktop

cd --
pidpcman="`ps -eo pid,cmd | grep -v grep | grep "pcmanfm --desktop" | awk '{ print $1 }'`"
#[ "$pidpcman" ] && kill $pidpcman
pcmanfm --desktop-off 2> /dev/null
pidlxpanel="`ps -eo pid,cmd | grep -v grep | grep "lxpanel" | awk '{ print $1 }'`"
[ "$pidlxpanel" ] && kill $pidlxpanel
pidrox="`ps -eo pid,cmd | grep -v grep | grep "rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB" | awk '{ print $1 }'`"
kill $pidrox 2> /dev/null
pidtint1="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcl" | awk '{ print $1 }'`"
kill $pidtint1 2> /dev/null
pidtint="`ps -eo pid,cmd | grep -v grep | grep "tint2" | grep -v ".config" | awk '{ print $1 }'`"
kill $pidtint  2> /dev/null
pidtint2="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcs" | awk '{ print $1 }'`"
killall alsamixertray 
killall setbackdrop
nitrogen --restore &
sleep 1
pidwbar="`ps -eo pid,cmd | grep -v grep | grep "cairo-dock" | awk '{ print $1 }'`"
sleep 1
[ -z "$pidwbar" ] && cairo-dock &
[ -z "$pidtint2" ] && tint2 -c $HOME/.config/tint2/tint2rcs &

#tint2restart
}
export -f cairod

roxd() {
ln -sf rox-pinbd set-desktop

cd --
pidpcman="`ps -eo pid,cmd | grep -v grep | grep "pcmanfm --desktop" | awk '{ print $1 }'`"
#[ "$pidpcman" ] && kill $pidpcman
pcmanfm --desktop-off 2> /dev/null
pidlxpanel="`ps -eo pid,cmd | grep -v grep | grep "lxpanel" | awk '{ print $1 }'`"
[ "$pidlxpanel" ] && kill $pidlxpanel
pidwbar="`ps -eo pid,cmd | grep -v grep | grep "cairo-dock" | awk '{ print $1 }'`"
kill $pidwbar 2> /dev/null
sleep 1
killall alsamixertray
pidtint1="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcl" | awk '{ print $1 }'`"
kill $pidtint1 2> /dev/null
setbackdrop &
pidrox="`ps -eo pid,cmd | grep -v grep | grep "rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB" | awk '{ print $1 }'`"
[ -z "$pidrox" ] && /usr/bin/rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB &
pidtint="`ps -eo pid,cmd | grep -v grep | grep "tint2" | grep -v ".config" | awk '{ print $1 }'`"
pidtint2="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcs" | awk '{ print $1 }'`"
kill $pidtint2 2> /dev/null 
[ -z "$pidtint" ] && tint2 &
}
export -f roxd

cairoroxd() {
ln -sf cairo_rox set-desktop

cd --
pidpcman="`ps -eo pid,cmd | grep -v grep | grep "pcmanfm --desktop" | awk '{ print $1 }'`"
#[ "$pidpcman" ] && kill $pidpcman
pcmanfm --desktop-off 2> /dev/null
pidlxpanel="`ps -eo pid,cmd | grep -v grep | grep "lxpanel" | awk '{ print $1 }'`"
[ "$pidlxpanel" ] && kill $pidlxpanel
pidwbar="`ps -eo pid,cmd | grep -v grep | grep "cairo-dock" | awk '{ print $1 }'`"
#kill $pidwbar 2> /dev/null
killall alsamixertray
sleep 1
pidrox="`ps -eo pid,cmd | grep -v grep | grep "rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB" | awk '{ print $1 }'`"
#kill $pidrox 2> /dev/null
#killall setbackdrop 2> /dev/null
setbackdrop &
#nitrogen --restore
 

pidtint1="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcl" | awk '{ print $1 }'`"
kill $pidtint1 2> /dev/null
pidtint="`ps -eo pid,cmd | grep -v grep | grep "tint2" | grep -v ".config" | awk '{ print $1 }'`"
kill $pidtint 2> /dev/null
#tint2 -c $HOME/.config/tint2/tint2rcl &
sleep 1
[ -z "$pidrox" ] && /usr/bin/rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB &
sleep 1
[ -z "$pidwbar" ] && cairo-dock &
pidtint2="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcs" | awk '{ print $1 }'`"
[ -z "$pidtint2" ] && tint2 -c $HOME/.config/tint2/tint2rcs &
}
export -f cairoroxd

tintd() {
ln -sf tint2p set-desktop

cd --
pidpcman="`ps -eo pid,cmd | grep -v grep | grep "pcmanfm --desktop" | awk '{ print $1 }'`"
#[ "$pidpcman" ] && kill $pidpcman
pcmanfm --desktop-off 2> /dev/null
pidlxpanel="`ps -eo pid,cmd | grep -v grep | grep "lxpanel" | awk '{ print $1 }'`"
[ "$pidlxpanel" ] && kill $pidlxpanel
pidwbar="`ps -eo pid,cmd | grep -v grep | grep "cairo-dock" | awk '{ print $1 }'`"
kill $pidwbar 2> /dev/null
sleep 1
pidrox="`ps -eo pid,cmd | grep -v grep | grep "rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB" | awk '{ print $1 }'`"
kill $pidrox 2> /dev/null
killall setbackdrop
nitrogen --restore &
sleep 2
killall alsamixertray
pidtint2="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcs" | awk '{ print $1 }'`"
kill $pidtint2 2> /dev/null
pidtint1="`ps -eo pid,cmd | grep -v grep | grep "tint2" | grep -v ".config" | awk '{ print $1 }'`"
[ -z "$pidtint1" ] && tint2 &
pidtint="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcl" | awk '{ print $1 }'`"
[ -z "$pidtint" ] && tint2 -c $HOME/.config/tint2/tint2rcl &
}
export -f tintd

pcmand() {
ln -sf pcman set-desktop

cd --
pidwbar="`ps -eo pid,cmd | grep -v grep | grep "cairo-dock" | awk '{ print $1 }'`"
kill $pidwbar 2> /dev/null
sleep 1
pidrox="`ps -eo pid,cmd | grep -v grep | grep "rox -p ${HOME}/.config/rox.sourceforge.net/ROX-Filer/pinbd-OB" | awk '{ print $1 }'`"
kill $pidrox 2> /dev/null
killall setbackdrop
#nitrogen --restore &

sleep 2

#pidtint2="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcs" | awk '{ print $1 }'`"
#kill $pidtint2 2> /dev/null
#pidtint1="`ps -eo pid,cmd | grep -v grep | grep "tint2" | grep -v ".config" | awk '{ print $1 }'`"
#[ -z "$pidtint1" ] && tint2 &
#pidtint="`ps -eo pid,cmd | grep -v grep | grep "tint2 -c $HOME/.config/tint2/tint2rcl" | awk '{ print $1 }'`"
#[ -z "$pidtint" ] && tint2 -c $HOME/.config/tint2/tint2rcl &
killall tint2
sleep 1
pcmanfm --desktop &

XDG_CURRENT_DESKTOP=LXDE lxpanel &
alsamixertray &
}
export -f pcmand


	opts=$(yad --center --image=user-desktop --image-on-top --height="300" --width="570" --title="Desktop Manager" --text="             <b> Select Desktop </b>  \n Select one of the options. " --list --print-column=2 --separator="" \
 --column="Type Desktop "  --column="Description" \
	  "$opt2" "$opt2a" \
	  "$opt4" "$opt4a" \
	  "$opt5" "$opt5a")
	  
[ $? -ne 0 ] && exit
         if [ ! "$opts" ]; then
          yad --center --width="450" --title="Desktop Manager" --text="  Nothing selected, please run again" --button="gtk-close"
		 exit		 
	 fi


if [ "$opts" = "$opt1a" ]; then
cairod &
disown
fi
if [ "$opts" = "$opt2a" ]; then
roxd &
disown
fi
if [ "$opts" = "$opt3a" ]; then
cairoroxd &
disown
fi
if [ "$opts" = "$opt4a" ]; then
tintd &
disown
fi
if [ "$opts" = "$opt5a" ]; then
pcmand &
disown
fi

exit 0









